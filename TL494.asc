Version 4
SHEET 1 3420 680
WIRE -192 -288 -192 -336
WIRE -192 -192 -192 -208
WIRE -112 -192 -192 -192
WIRE -48 -192 -112 -192
WIRE -192 -176 -192 -192
WIRE 1344 -176 1216 -176
WIRE 1536 -176 1344 -176
WIRE 1792 -176 1536 -176
WIRE 1904 -176 1792 -176
WIRE 1536 -144 1536 -176
WIRE 1984 -128 1984 -176
WIRE 128 -112 128 -128
WIRE 336 -112 128 -112
WIRE 1344 -96 1344 -176
WIRE 128 -80 128 -112
WIRE 336 -64 336 -112
WIRE -640 -48 -640 -96
WIRE -352 -48 -352 -80
WIRE -48 -48 -48 -192
WIRE 0 -48 -48 -48
WIRE 1904 -48 1904 -176
WIRE 1984 -16 1984 -48
WIRE 1344 0 1344 -32
WIRE 1536 0 1536 -64
WIRE -128 16 -192 16
WIRE 0 16 -48 16
WIRE 336 16 256 16
WIRE 1792 16 1792 -96
WIRE 1136 48 1136 -176
WIRE 1312 48 1136 48
WIRE 2176 48 2144 48
WIRE 336 64 336 16
WIRE 576 64 336 64
WIRE 1792 64 1792 16
WIRE 1904 64 1904 32
WIRE 1904 64 1792 64
WIRE 2176 64 2176 48
WIRE 0 80 -224 80
WIRE 320 80 256 80
WIRE 1536 80 1536 0
WIRE 2144 80 2144 48
WIRE 1792 96 1792 64
WIRE 0 144 -160 144
WIRE 336 144 336 64
WIRE 336 144 256 144
WIRE 2192 160 2144 160
WIRE 2304 160 2272 160
WIRE -640 192 -640 32
WIRE 0 208 -32 208
WIRE 320 208 320 80
WIRE 320 208 256 208
WIRE 384 208 320 208
WIRE 1984 208 1984 48
WIRE 2112 208 1984 208
WIRE 864 224 832 224
WIRE 976 224 928 224
WIRE 1024 224 976 224
WIRE 1120 224 1088 224
WIRE 1200 256 1200 240
WIRE 2448 256 2192 256
WIRE -352 272 -352 32
WIRE -320 272 -352 272
WIRE -192 272 -192 16
WIRE -192 272 -240 272
WIRE 0 272 -192 272
WIRE 976 272 976 224
WIRE 1104 272 976 272
WIRE 2144 272 2144 160
WIRE 2160 272 2144 272
WIRE 2592 272 2384 272
WIRE 2256 288 2224 288
WIRE 2304 288 2304 160
WIRE 2304 288 2256 288
WIRE 2448 288 2448 256
WIRE 2464 288 2448 288
WIRE 2592 288 2592 272
WIRE -640 304 -640 192
WIRE 2112 304 2112 208
WIRE 2160 304 2112 304
WIRE 832 336 832 224
WIRE 864 336 832 336
WIRE 1104 336 1104 272
WIRE 1104 336 1088 336
WIRE -1200 368 -1200 336
WIRE -1088 368 -1088 336
WIRE 2192 368 2192 320
WIRE 2384 368 2384 272
WIRE 2384 368 2192 368
WIRE -352 384 -352 272
WIRE -224 384 -224 80
WIRE 384 384 384 208
WIRE -160 400 -160 144
WIRE 304 400 256 400
WIRE 576 400 576 64
WIRE 688 400 576 400
WIRE 864 400 752 400
WIRE 1152 400 1152 336
WIRE 1152 400 1088 400
WIRE 1312 400 1312 48
WIRE 1408 400 1312 400
WIRE 1120 416 1120 224
WIRE 1200 416 1200 352
WIRE 1200 416 1120 416
WIRE 1312 416 1312 400
WIRE 1312 416 1200 416
WIRE 1408 432 1408 400
WIRE 2256 432 2256 288
WIRE -192 464 -224 464
WIRE -160 464 -192 464
WIRE 0 464 -32 464
WIRE 832 464 832 336
WIRE 864 464 832 464
WIRE 1120 464 1120 416
WIRE 1120 464 1088 464
WIRE -640 480 -640 384
WIRE -32 496 -32 464
WIRE 1152 496 1120 496
WIRE 1120 528 1120 496
WIRE 1120 528 1088 528
WIRE 1200 528 1200 512
WIRE 128 560 128 496
WIRE 976 576 976 560
FLAG 128 560 0
FLAG -1200 336 Vin
FLAG -1200 448 0
FLAG -1088 448 0
FLAG -1088 336 Vcc
FLAG 128 -128 Vcc
FLAG -32 208 V_ADJ
FLAG -352 464 0
FLAG -352 -80 Vref
FLAG -192 464 0
FLAG 0 336 Imax
FLAG 0 400 Ilim
FLAG 304 400 Vref
FLAG -640 480 0
FLAG -640 -96 Vref
FLAG -640 192 Ilim
FLAG -32 496 0
FLAG 1536 160 0
FLAG 1792 16 Imax
FLAG 1792 176 0
FLAG -192 -336 Vref
FLAG -192 -112 0
FLAG -112 -112 0
FLAG 2176 64 0
FLAG 2592 368 0
FLAG 2464 368 0
FLAG 1344 0 0
FLAG 384 384 0
FLAG 1200 528 0
FLAG 1200 240 Vin
FLAG 832 224 Vcc
FLAG 864 528 0
FLAG 1408 496 0
FLAG 1536 0 V_ADJ
SYMBOL ValVol\\TL494 128 208 R0
SYMATTR InstName U1
SYMBOL voltage -1200 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 300
SYMBOL voltage -1088 352 R0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res -368 -64 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -368 368 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -224 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 560
SYMBOL res -240 368 R0
SYMATTR InstName R4
SYMATTR Value 2k2
SYMBOL cap -176 400 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res -656 -64 R0
SYMATTR InstName R5
SYMATTR Value 3.3k
SYMBOL res -656 288 R0
SYMATTR InstName R6
SYMATTR Value 330
SYMBOL res -32 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 50k
SYMBOL ind 1232 -192 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 100µ
SYMBOL cap 1328 -96 R0
SYMATTR InstName C2
SYMATTR Value 1m
SYMBOL res 1552 -48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 1520 64 R0
SYMATTR InstName R11
SYMATTR Value 470
SYMBOL res 1776 -192 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res 1776 80 R0
SYMATTR InstName R13
SYMATTR Value 0.11
SYMBOL res -208 -304 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap -208 -176 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL res -128 -208 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL Opamps\\UniversalOpamp2 2192 288 R0
SYMATTR InstName U2
SYMBOL res 2288 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL res 2160 176 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL VOLTAGE 2464 272 R0
WINDOW 123 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMATTR SpiceLine Rser=0.02
SYMBOL VOLTAGE 2592 272 R0
WINDOW 123 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value -12
SYMATTR SpiceLine Rser=0.02
SYMBOL cap 1968 -16 R0
SYMATTR InstName C5
SYMATTR Value 10000mF
SYMATTR SpiceLine IC=24
SYMBOL res 1968 -144 R0
SYMATTR InstName R8
SYMATTR Value 0.1
SYMBOL res 320 -80 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL nmos 1152 256 R0
SYMATTR InstName Q1
SYMATTR Value IXFX90N30
SYMBOL nmos 1152 416 R0
SYMATTR InstName Q2
SYMATTR Value IXFX90N30
SYMBOL cap 1088 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 1µ
SYMBOL schottky 864 240 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL DigitalLogic\\INV_1 704 400 R0
SYMATTR InstName U5
SYMBOL ZZZ\\GATEDRV\\ir2104_ 976 432 R0
SYMATTR InstName U3
SYMBOL diode 1424 496 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -172 13 Left 2
SYMATTR InstName D2
SYMATTR Value RFUH20NS3S
SYMBOL res 1888 -64 R0
SYMATTR InstName R14
SYMATTR Value 100
TEXT -1232 584 Left 2 !.tran 0 1 10m startup uic
TEXT 3144 -80 Left 2 !.options gmin=1e-10
TEXT 3144 -24 Left 2 !.options abstol=1e-5
TEXT 3152 24 Left 2 !.options reltol=0.003
TEXT 3152 72 Left 2 !.options cshunt=1e-15
